<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{index}">

<head>
<meta charset="UTF-8">
<meta name="description" content="Male_Fashion Template">
<meta name="keywords" content="Male_Fashion, unica, creative, html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>전원마켓 상세페이지</title>
<style>
.table td {
	text-align: right;
	padding-right: 80px;
}

#getNum {
	width: 150px;
}
</style>
</head>

<body>
	<div layout:fragment="content">
		<!-- Shop Details Section Begin -->
		<section th:each="mk:${mk}" class="shop-details">

			<!-- 이미지 부분 -->
			<div class="product__details__pic">
				<div class="container">
					<div class="row">
						<div class="col-lg-12" style="text-align: left">
							<div class="product__details__breadcrumb">
								<a href="/mkList">전원마켓</a> <span th:text="|${mk.title}|"></span>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-3 col-md-3"></div>
						<div class="col-lg-6 col-md-9">
							<div class="tab-content">
								<div class="tab-pane active" id="tabs-1" role="tabpanel">
									<div class="product__details__pic__item">
										<img th:src="${mk.rep}" alt="대표사진">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="product__details__content">
				<div class="container">
					<!-- 제품제목,결제버튼 -->
					<div class="row d-flex justify-content-center">
						<div class="col-lg-8">
							<div class="product__details__text">
								<h3 th:text="|${mk.title}|">상품명</h3>
								<div class="rating">
									<i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
										class="fa fa-star"></i> <i class="fa fa-star"></i> <i
										class="fa fa-star-o"></i> <span> - 5 Reviews</span>
								</div>
								<h4>
									<span id="onePay" th:text="|${mk.price}|" style="display: none"></span>
									<span
										th:text="${#numbers.formatInteger(mk.price==null?0:mk.price,0,'COMMA')}">(금액)</span>원

								</h4>

								<!-- 결제 -->
								<div>

									<table class="table">

										<tr>
											<th>수량 :</th>
											<td><input type="number" id="getNum" min="1" value="0"
												onchange="getPay()"> 개</td>
										</tr>
										<tr>

											<th>금액 :</th>
											<td><b><span id="payResult"></span></b> 원</td>
										</tr>
										<tr>
											<th colspan="2">
												<div class="product__details__cart__option">
													<a href="#" class="primary-btn">장바구니</a>
													<a href="#" class="primary-btn">결제하기</a>
												</div>
											</th>
										</tr>
									</table>

								</div>

							</div>
						</div>
					</div>
					<!-- 상세설명, 리뷰, 문의사항 탭 -->
					<div class="row">
						<div class="col-lg-12">
							<div class="product__details__tab">
								<ul class="nav nav-tabs" role="tablist">
									<li class="nav-item"><a class="nav-link active"
										data-toggle="tab" href="#tabs-5" role="tab">상세설명</a></li>
									<li class="nav-item"><a class="nav-link" data-toggle="tab"
										href="#tabs-6" role="tab">리뷰</a></li>
									<li class="nav-item"><a class="nav-link" data-toggle="tab"
										href="#tabs-7" role="tab">문의처</a></li>
								</ul>
								<div class="tab-content">
									<!-- 첫번째 탭 : 상세설명 ck editor -->
									<div class="tab-pane active" id="tabs-5" role="tabpanel">
										<div class="product__details__tab__content">
											<p class="note">상세설명</p>
											<div class="product__details__tab__content__item"
												th:utext="|${mk.detaDesct}|">(ck editor에서 넣은 내용)</div>

										</div>
									</div>
									<!-- 두번째 탭: 리뷰 -->
									<div class="tab-pane" id="tabs-6" role="tabpanel">
										<div class="product__details__tab__content">
											<div class="product__details__tab__content__item">
												<div id="리뷰등록칸">
													<div style="width: 200px;">
														<select name="star">
															<option value="0">별점</option>
															<option value="5">★★★★★</option>
															<option value="4">★★★★☆</option>
															<option value="3">★★★☆☆</option>
															<option value="2">★★☆☆☆</option>
															<option value="1">★☆☆☆☆</option>
														</select>
													</div>
													<textarea name="" id="" cols="70" rows="2"></textarea>

													<a href="#" class="button">리뷰등록</a>
												</div>

												<table class="table">
													<tr>
														<th>평점</th>
														<th>내용</th>
														<th>아이디</th>
														<th>수정</th>
													</tr>
													<tr>
														<td>

															<p>(2023-02-05)</p>
														</td>
														<td>재미있었습니다.</td>
														<td>아이디</td>
														<td><button>수정</button>
															<button>삭제</button></td>
													</tr>

												</table>
											</div>
										</div>
									</div>
									<!-- 세번째 탭 -->
									<div class="tab-pane" id="tabs-7" role="tabpanel">
										<div class="product__details__tab__content">
											<p class="note">문의는 아래 사항으로 연락 바랍니다.</p>
											<div class="product__details__tab__content__item">
												<h5>판매자 정보</h5>
												<p>판매자: 000</p>
												<p>전화번호: 054-4545-8584</p>
												<p>주 소: 경기도 ~</p>
											</div>
											<div class="product__details__tab__content__item">
												<h5>Material used</h5>
												<p>Po.</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<br> <br> <br> <br>
				</div>
			</div>
		</section>
		<!-- Shop Details Section End -->
		<script>
			//천단위 콤마찍기 함수
			function number_format(num) {
				return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}
			//토탈금액 함수
			function getPay() {
				let num = Number($('#getNum').val());
				let pay = Number($('#onePay').text());
				let total = num * pay
				total = number_format(total);
				$('#payResult').text(total);
			}
		</script>
	</div>
</body>

</html>