<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>귀농귀촌 가이드</title>
<style>
.eduTitle {
	cursor: pointer;
}
</style>
</head>
<body>
	<div layout:fragment="content">
		<section class="breadcrumb-option">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div class="breadcrumb__text">
							<h4>귀농귀촌 가이드</h4>
							<div class="breadcrumb__links">
								<span>가이드 따라 하세요</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- 타이틀 Section End -->

		<!-- Shop Section Begin -->
		<section class="shop spad">
			<div class="container">

				<!--------------- 본문 --------------->
				<!-- Testimonial Section Begin -->
				<section class="testimonial">
					<div class="container-fluid">
						<div class="row">
							<div class="col-lg-6 p-0">
								<div class="testimonial__text">
									<span class="icon_quotations"></span>
									<p>“Going out after work? Take your butane curling iron
										with you to the office, heat it up, style your hair before you
										leave the office and you won’t have to make a trip back home.”</p>
									<div class="testimonial__author">
										<div class="testimonial__author__pic">
											<img src="img/about/testimonial-author.jpg" alt="">
										</div>
										<div class="testimonial__author__text">
											<h5>Augusta Schultz</h5>
											<p>Fashion Design</p>
										</div>
									</div>
								</div>
							</div>
							<div class="col-lg-6 p-0">
								<div class="testimonial__pic set-bg"
									data-setbg="img/about/testimonial-pic.jpg"></div>
							</div>
						</div>
					</div>
				</section>
				<!-- Testimonial Section End -->

			</div>
		</section>

		<script>
		$(function(){
			ajax_eduList(1)
		})
		
		//목록 ajax
		function ajax_eduList(page){
			$.ajax({
				url: "https://apis.data.go.kr/1390000/youngV2/policyListV2?typeDv=json&serviceKey=XMbKkFwk066V9gZ9uvn63yI7xGN5wEbCjEffJl0upWWgKhcaFHesiDZHkYOwrOpgeyC/YwxBqavNpAhMdAdU5w==",
				method: "GET",
				data: {page},
				success(result){					
					console.log(result)
					makeList(result)
				},
				error(err){
					console.log(err)
				}
			})
		}
		
		function makeList(data){
			//테이블 목록 출력
			data.policy_list.forEach(el => {
				let title=el.title;
				$('#eduTable>tbody').append('<tr>'
						+'<td class="seq">'+el.seq+'</td>'
						+'<td class="eduTitle">'+title+'</td>'
						+'<td>'+el.chargeAgency+'</td>'						
						+'<td>'+el.applStDt+'</td>'
						+'<td>'+el.applEdDt+'</td>'
						+'</tr>')	
			})
			
 			//제목 클릭 이벤트
			let eduTitles = $('.eduTitle');
			eduTitles.each(function(index, el) {
			  $(el).on('click', function() {
			    let seq = $(this).closest('tr').find('.seq').text();
			    console.log(seq)
			    location.href= "/eduInfo?seq="+seq;			    
			  })
			}) 
			
		} 
		
		/* //상세페이지 Ajax
		function ajax_EduInfo(seq){			
			$.ajax({
				url: "/eduInfo",
				method: "GET",
				dataType: "json",
				data: { value: seq },
				success(result){					
					console.log(result);					
				},
				error(err){
					console.log(err);
				}
			})
		} */
		
		
		</script>
	</div>
</body>
</html>